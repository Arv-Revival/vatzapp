(this.webpackJsonpvatzapp=this.webpackJsonpvatzapp||[]).push([[62],{1117:function(e,t,a){"use strict";a.r(t);var c=a(8),s=a(13),i=a(218),n=a(21),r=a(179),l=a.n(r),o=a(1),d=a.n(o),j=a(908),u=a(904),f=a(983),b=a(1098),O=a(84),m=a(51),h=a(40),p=a(31),x=a(217),v=a(1082),g=a(2);t.default=function(){var e=Object(o.useState)(!1),t=Object(n.a)(e,2),a=t[0],r=t[1],N=Object(o.useState)([]),D=Object(n.a)(N,2),z=D[0],S=D[1],w=Object(o.useState)(!1),y=Object(n.a)(w,2),F=y[0],E=y[1],k=Object(o.useState)(!1),B=Object(n.a)(k,2),M=B[0],P=B[1],C=Object(o.useState)(!1),_=Object(n.a)(C,2),I=_[0],J=_[1],U=Object(o.useState)(0),G=Object(n.a)(U,2),A=G[0],R=G[1],W=Object(o.useState)(!1),H=Object(n.a)(W,2),L=H[0],T=H[1],X=Object(o.useState)([]),Z=Object(n.a)(X,2),K=Z[0],Y=Z[1],$=Object(o.useState)([]),q=Object(n.a)($,2),Q=q[0],V=q[1],ee=Object(o.useState)([]),te=Object(n.a)(ee,2),ae=te[0],ce=te[1],se=p.c.MAX_UPLOAD_SIZE,ie=d.a.useMemo((function(){return["pdf","jpg","jpeg","png","doc","docx","jfif","gif","bmp"]}),[]);Object(o.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));T(e.is_checker_assigned)}),[]);var ne=d.a.useCallback((function(){if(P(!1),E(!1),K.length){r(!0);var e={file_id_list:K.map((function(e){return e.fileId}))};Object(O.a)("post",h.a.entry.create,e,!0).then((function(e){r(!1),e&&201===e.status_code?(Y([]),Object(m.a)("Success",e.message,"success")):Object(m.a)("Error",e.message,"error")})).catch((function(e){r(!1),Object(m.a)("Error","Something went wrong","error")}))}}),[K]);Object(o.useEffect)((function(){var e=z.filter((function(e){return 0===e.status}));I||!M||e.length||(J(!0),setTimeout((function(){ne()}),1e3))}),[K,Q,z,I,M,ne]);var re=Object(o.useCallback)((function(e){var t=/(?:\.([^.]+))?$/.exec(e.name)[1];return console.log(t),ie.includes(null===t||void 0===t?void 0:t.toLowerCase())}),[ie]),le=Object(o.useCallback)((function(e){var t=[],a=[];e.forEach((function(e){re(e)?e.size>=se?a.push({id:(new Date).valueOf(),reason:"Exceeds maximum file size",fileData:e}):t.push({id:(new Date).valueOf(),status:0,fileData:e}):a.push({id:(new Date).valueOf(),reason:"Unsupported file format",fileData:e})})),S((function(e){return[].concat(Object(s.a)(e),t)})),ce((function(e){return[].concat(Object(s.a)(e),a)}))}),[se,re]),oe=Object(b.a)({onDrop:le}),de=oe.getRootProps,je=oe.getInputProps,ue=oe.isDragActive,fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var a=1024,c=t<0?0:t,s=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(a));return parseFloat((e/Math.pow(a,i)).toFixed(c))+" "+s[i]},be=function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){if(t.type.includes("image"))Object(v.a)(t,{maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0}).then((function(e){var t=new FormData;return t.append("file",e),Object(O.b)(t)})).then((function(t){201===t.status_code?e(t):(a(t),Object(m.a)("Error",t.message,"error"))})).catch((function(e){console.log("File Upload Error!!!\n\n",e),a(e),Object(m.a)("Error","File upload failed","error")}));else{var c=new FormData;c.append("file",t),Object(O.b)(c).then((function(t){201===t.status_code?e(t):(a(t),Object(m.a)("Error",t.message,"error"))})).catch((function(e){console.log("File Upload Error!!!\n\n",e),a(e),Object(m.a)("Error","File upload failed","error")}))}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)(d.a.Fragment,{children:[a&&Object(g.jsx)(x.a,{}),Object(g.jsx)(j.a,{children:Object(g.jsx)(u.a,{xl:12,children:Object(g.jsxs)(f.a,{className:"rounded",children:[Object(g.jsx)(f.a.Header,{children:Object(g.jsx)("h5",{className:"text-primary",children:"Upload Files"})}),Object(g.jsx)(f.a.Body,{className:"p-4",children:L?Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",Object(c.a)(Object(c.a)({},de()),{},{className:"drop-zone",children:[Object(g.jsx)("input",Object(c.a)({},je())),ue?Object(g.jsx)("p",{children:"Drop the files here ..."}):Object(g.jsxs)("div",{className:"text-center",children:[Object(g.jsx)("i",{className:"feather icon-upload-cloud upload-icon"}),Object(g.jsx)("p",{className:"font-weight-bold",style:{fontSize:15},children:"Drag files here, or click to browse files"})]})]})),Object(g.jsxs)("div",{className:"text-right",children:[Object(g.jsx)("div",{style:{fontSize:11},className:"my-2",children:"Supported file formats JPG, JPEG, PNG, JFIF, GIF, BMP, PDF, DOC, DOCX."}),Object(g.jsx)("div",{style:{fontSize:11},className:"mb-2",children:"Max upload file size 50 MB"})]}),Object(g.jsxs)("div",{className:"upload-container pt-3",children:[F&&Object(g.jsx)("div",{className:"mb-4 progress",children:Object(g.jsx)("div",{role:"progressbar",className:"progress-bar bg-success progress-bar-animated progress-bar-striped",style:{width:A+"%"}})}),z.some((function(e){return 0===e.status}))&&Object(g.jsx)("div",{className:"text-center mb-3",children:Object(g.jsxs)("button",{className:"btn btn-primary upload-btn",onClick:function(){if(!M){R(0),J(!1),P(!0);var e=z.filter((function(e){return 0===e.status})),t=e.length?100/e.length:0;E(!0),z.forEach((function(e){0===e.status&&be(e.fileData).then((function(a){e.status=1,R((function(e){return e+t})),Y((function(t){var i;return[].concat(Object(s.a)(t),[Object(c.a)(Object(c.a)({},e),{},{fileId:null===a||void 0===a||null===(i=a.payload)||void 0===i?void 0:i.file_id})])}))})).catch((function(a){e.status=2,R((function(e){return e+t})),V((function(t){return[].concat(Object(s.a)(t),[e])}))}))}))}},children:[M&&Object(g.jsx)("span",{className:"spinner-border spinner-border-sm mr-1",role:"status"}),"Upload Documents"]})})]}),z.length>0&&Object(g.jsx)(d.a.Fragment,{children:Object(g.jsx)("div",{className:"files-list-container",children:z.map((function(e,t){return Object(g.jsxs)("div",{className:"file-item p-2",children:[Object(g.jsxs)("div",{className:"d-flex",children:[Object(g.jsx)("div",{className:"file-icon",children:Object(g.jsx)("i",{className:"feather icon-file-text"})}),Object(g.jsxs)("div",{className:"file-details",children:[Object(g.jsx)("div",{className:"file-name",children:e.fileData.name}),Object(g.jsx)("div",{className:"file-size",children:fe(e.fileData.size)})]})]}),Object(g.jsx)("div",{className:"upload-status ".concat(1===e.status?"text-success":2===e.status?"text-danger":"text-primary"),children:Object(g.jsx)("i",{className:"feather ".concat(1===e.status?"icon-check-circle":2===e.status?"icon-x-circle":"icon-upload-cloud"),role:"button",title:"Remove",onClick:function(){return function(e){console.log(e);var t=z.filter((function(t){return console.log(t.id,e.id,t.fileData.size,e.fileData.size),t.id!==e.id||t.fileData.size!==e.fileData.size}));S(t)}(e)}})})]},t)}))})}),ae.length>0&&Object(g.jsxs)(d.a.Fragment,{children:[Object(g.jsx)("label",{className:"text-danger my-3",children:"Rejected Files"}),Object(g.jsx)("div",{className:"files-list-container",children:ae.map((function(e,t){return Object(g.jsxs)("div",{className:"file-item p-2",children:[Object(g.jsxs)("div",{className:"d-flex",children:[Object(g.jsx)("div",{className:"file-icon",children:Object(g.jsx)("i",{className:"feather icon-file-text"})}),Object(g.jsxs)("div",{className:"file-details",children:[Object(g.jsx)("div",{className:"file-name",children:e.fileData.name}),Object(g.jsx)("div",{className:"file-size",children:fe(e.fileData.size)})]})]}),Object(g.jsxs)("div",{className:"d-flex align-items-center",children:[Object(g.jsx)("div",{className:"mr-4 text-danger",children:e.reason}),Object(g.jsx)("div",{className:"upload-status text-danger",role:"button",title:"Remove",onClick:function(){return function(e){console.log(e);var t=ae.filter((function(t){return console.log(t.id,e.id,t.fileData.size,e.fileData.size),t.id!==e.id||t.fileData.size!==e.fileData.size}));ce(t)}(e)},children:Object(g.jsx)("i",{className:"feather icon-x-circle"})})]})]},t)}))})]})]}):Object(g.jsx)("div",{role:"alert",className:"fade alert alert-danger show",children:"No Checker assigned yet. Please contact Administrator."})})]})})})]})}}}]);
//# sourceMappingURL=62.371edd5e.chunk.js.map